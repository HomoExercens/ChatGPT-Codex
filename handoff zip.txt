너는 Codex(GPT-5.2)이며 WSL(Ubuntu)에서 풀 액세스로 작업한다.
이 프로젝트는 로컬에서 개발/테스트/데모가 돌아가야 하고, 작업 단위별로 “git 커밋”과 “handoff zip 번들”을 남겨야 한다.

========================================================
A) Git 표준 세팅 (없으면 즉시 도입)
========================================================
1) .git 없으면 git 초기화
- git init -b main
- .gitignore 추가(필수):
  - node_modules/, dist/, build/, .venv/, __pycache__/, .pytest_cache/, .mypy_cache/
  - artifacts/** (단, artifacts/handoff/*.zip 은 생성물이라 ignore 유지)
  - .env, .DS_Store 등
- 최초 커밋:
  - git add .
  - git commit -m "chore: bootstrap repo"

2) 커밋 컨벤션(강제): Conventional Commits
- 커밋 메시지는 반드시 아래 형태:
  - feat(scope): ...
  - fix(scope): ...
  - chore(scope): ...
  - docs(scope): ...
  - test(scope): ...
- 큰 변경은 커밋을 쪼개라(작업 단위 1커밋).

3) 훅(표준): pre-commit (권장)
- 목적: 포맷/린트/간단 테스트를 커밋 전에 자동 실행
- 루트에 .pre-commit-config.yaml 추가
- 설치/활성화:
  - pip install pre-commit
  - pre-commit install
- 훅 구성(프로젝트에 맞게 현실적으로):
  - python: ruff/black(또는 ruff format), 기본 검사
  - web: eslint/prettier(있다면)
  - 공통: trailing whitespace, end-of-file-fixer 등
- 단, 훅에서 “시간 오래 걸리는 전체 테스트”는 금지(가벼운 검사만).
  - 전체 테스트는 make test로 돌린다.

(옵션) 더 빠른 훅 매니저가 필요하면 Lefthook으로 교체 가능하나, v1은 pre-commit으로 통일한다.

========================================================
B) Handoff 번들 생성 표준 (git 있으면 ‘변경 파일 나열’은 자동화)
========================================================
목표:
- 매 작업 끝마다: make test 통과 + HANDOFF 문서 갱신 + zip 생성 + 경로 출력
- zip은 “내가 ChatGPT에 업로드하기 쉬운 형태”로 항상 동일 규칙을 따른다.

[필수] Makefile에 아래 타깃 추가(없으면 생성)
- make handoff

[필수] scripts/handoff.sh 생성 (make handoff가 호출)
- 아래 동작을 순서대로 수행:

1) 테스트
- make test
- 실패하면 즉시 종료(zip 생성 금지)

2) HANDOFF 문서 갱신 (없으면 생성/있으면 업데이트)
- docs/HANDOFF_REPORT.md
- docs/QA_CHECKLIST.md
- docs/TEST_RESULTS.md
- docs/HANDOFF.json
- docs/ARCHITECTURE_NOTES.md (가능하면)
갱신 내용(최소):
- 현재 git commit hash: git rev-parse HEAD
- 최근 커밋 5개: git log -5 --oneline
- 마지막 handoff 태그 이후 변경 요약:
  - LAST_TAG=$(git tag --list "handoff/*" --sort=-creatordate | head -n 1)
  - BASE=${LAST_TAG:-$(git rev-list --max-parents=0 HEAD)}
  - git diff --name-only "$BASE"..HEAD
  - git diff --stat "$BASE"..HEAD
- 테스트 결과: make test 실행 시각/커맨드/통과 여부를 docs/TEST_RESULTS.md에 기록

3) zip 생성(표준: git archive + 필요한 비추적 파일만 추가)
- 출력 폴더: ./artifacts/handoff/
- 파일명: neuroleague_handoff_bundle_YYYYMMDD_HHMMSS.zip
- 절차:
  a) mkdir -p artifacts/handoff
  b) TS=$(date +"%Y%m%d_%H%M%S")
  c) OUT_REL="artifacts/handoff/neuroleague_handoff_bundle_${TS}.zip"
  d) git archive --format=zip --output "$OUT_REL" HEAD
     (git이 추적하는 파일만 깔끔하게 포함됨: node_modules/venv 같은 건 원천적으로 빠짐)
  e) zip에 반드시 포함돼야 하는데 git 추적이 아닐 수 있는 것만 추가:
     - ui/ (정책상 추적하지 않으면) 또는 docs/screenshots/ 등
     - 필요한 경우: zip -ur "$OUT_REL" ui docs/screenshots
  f) 마지막에 handoff 태그 생성(표준):
     - git tag -a "handoff/${TS}" -m "handoff ${TS}"

4) “경로 출력” (사용자에게 복붙용으로)
- Linux 절대경로:
  - OUT_ABS="$(pwd -P)/$OUT_REL"
- Windows UNC 경로(WSL):
  - UNC="\\\\wsl$\\Ubuntu$(pwd -P | sed 's|/|\\\\|g')\\\\${OUT_REL//\//\\\\}"
- 그리고 zip 내부 상위 목록 출력:
  - unzip -l "$OUT_REL" | head -n 40
- 마지막 한 줄 포맷(강제):
  - HANDOFF_ZIP_READY: <OUT_ABS> | <UNC>

========================================================
C) UI 원본 동기화(기존 규칙 유지)
========================================================
UI 원본 경로:
- /home/clutch/cursor-workspace/cursor/뉴로리그
동기화 스크립트는 scripts/sync_ui.sh로 유지하되:
- “handoff” 전에 항상 실행하진 말고(불필요한 노이즈), UI 파일이 바뀐 날에만 실행하도록 안내 문서에 명시.
- 경로에 한글이 있으니 셸에서 항상 따옴표로 감싸라.

========================================================
D) 실행 결과로 반드시 보고할 것
========================================================
너는 매 작업 종료 시 아래만 출력한다(과장/설명 금지, 딱 사실만):
1) make test 결과(통과/실패)
2) git 상태:
   - git status --porcelain
   - git log -5 --oneline
3) HANDOFF_ZIP_READY: ... (절대경로 | UNC경로)

========================================================
E) 운영에서 안 터지게 하는 필수 보강(추가)
========================================================
1) 최초 커밋 안전장치
- git init 이후 반드시:
  - git status --porcelain
  - git add -A
  - git status --porcelain (비어있지 않으면 커밋 진행)

2) handoff zip에 “추적 안 되는 필수 산출물” 포함 규칙
- git archive는 추적 파일만 포함하므로, 아래 경로가 존재하면 반드시 zip에 추가하라:
  - docs/HANDOFF_REPORT.md docs/QA_CHECKLIST.md docs/TEST_RESULTS.md docs/HANDOFF.json (무조건)
  - ui/ (존재하면)
  - docs/screenshots/ (존재하면)
  - artifacts/replays/ 또는 artifacts/replay/ (존재하면)
  - artifacts/handoff/는 제외(자기 자신 중복 방지)
- 예시:
  - [ -d ui ] && zip -ur "$OUT_REL" ui
  - [ -d docs/screenshots ] && zip -ur "$OUT_REL" docs/screenshots
  - [ -d artifacts/replays ] && zip -ur "$OUT_REL" artifacts/replays

3) HANDOFF 문서에 “변경요약”을 반드시 남겨라
- 마지막 handoff 태그 이후 변경 파일 목록 + diff stat을 docs/HANDOFF_REPORT.md에 항상 갱신해라.
